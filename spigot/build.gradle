
version = '0.35.0'

def jacksonVersion = '2.10.2'

java {
  registerFeature('servletSupport') {
    usingSourceSet(sourceSets.main)
  }
}

dependencies {
  compileOnly 'org.spigotmc:spigot-api:1.16.5-R0.1-SNAPSHOT'
  compileOnly 'org.jetbrains:annotations:16.0.2'
  compileOnly files('../third_party/dynmap/target/dynmap-api-3.2-SNAPSHOT.jar')
  compileOnly 'com.viaversion:viaversion-api:4.0.1'
  implementation 'com.github.briandilley.jsonrpc4j:jsonrpc4j:1.6'
  implementation project(":shared")
  servletSupportImplementation 'javax.servlet:javax.servlet-api:4.0.1'
  servletSupportImplementation 'javax.portlet:portlet-api:3.0.1'
  implementation "com.fasterxml.jackson.core:jackson-core:${jacksonVersion}"
  implementation "com.fasterxml.jackson.core:jackson-databind:${jacksonVersion}"
  implementation "com.fasterxml.jackson.core:jackson-annotations:${jacksonVersion}"
}

jar.dependsOn(shadowJar)

shadowJar {
  dependencies {
    include(dependency(':shared'))
    include(dependency('javax.servlet:javax.servlet-api:4.0.1'))
    include(dependency('javax.portlet:portlet-api:3.0.1'))
    include(dependency("com.fasterxml.jackson.core:jackson-core:${jacksonVersion}"))
    include(dependency("com.fasterxml.jackson.core:jackson-databind:${jacksonVersion}"))
    include(dependency("com.fasterxml.jackson.core:jackson-annotations:${jacksonVersion}"))
  }
  archiveClassifier = 'all'
}
